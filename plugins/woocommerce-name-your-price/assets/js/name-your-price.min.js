/*! WooCommerce Name Your Price 2.0.2 2014-04-25 16:32 */
jQuery(document).ready(function(a){function b(){a("input.nyp-input").eq(0).focus(),a(".cart").on("woocommerce-nyp-update",function(){var b=a(this),e=b.find(".nyp"),f=b.find(".nyp-input"),g=(b.find(":submit"),f.val()),h=b.find(".woocommerce-nyp-message");h.length||e.prepend('<div class="woocommerce-nyp-message woocommerce-error" style="display:none"></div>');var i=woocommerce_nyp_params.minimum_error,j=!1,k=d(g),l=parseFloat(e.data("min-price")),m=parseFloat(e.data("annual-minimum")),n=b.find(".nyp-period"),o=n.val();m>0?(form_annulualized_price=k*woocommerce_nyp_params.annual_price_factors[o],m>form_annulualized_price&&(i=i+" / "+n.find('option[value="'+o+'"]').text(),j=m/woocommerce_nyp_params.annual_price_factors[o])):l>k&&(j=l),f.val(c(k)),j?(e.data("submit",!1),i=i.replace("%s",c(j,woocommerce_nyp_params.currency_symbol)),h.html(i).show(),f.focus()):(e.data("submit",!0),h.fadeOut("slow"),a(this).find("#product-addons-total").data("price",k),b.trigger("woocommerce-product-addons-update"),e.data("price",k),b.trigger("woocommerce-nyp-updated-item"),a("body").trigger("woocommerce-nyp-updated"))}),a(".cart").on("change",[".nyp-input",".nyp-period"],function(){var b=a(this).closest(".cart");b.trigger("woocommerce-nyp-update")}),a(".cart").on("submit",function(){a(this).find(".nyp").data("submit")===!1&&(event.preventDefault(),a(this).find(":submit").removeAttr("disabled"))}),a(".cart input.nyp-input").trigger("change"),a(".variations_form").each(function(){var b=a(this),d=a(this).find("button.single_add_to_cart_button"),e=a(this).find(".nyp"),f=e.find(".nyp-input"),g=e.find(".minimum-price"),h=d.html(),i=woocommerce_nyp_params.add_to_cart_text;e.hide(),g.hide(),b.on("found_variation",function(a,b){d.html(i),void 0!=typeof b.is_nyp&&b.is_nyp===!0?(posted_price=b.posted_price?b.posted_price:0,minimum_price=b.minimum_price?b.minimum_price:0,minimum_price_html=b.minimum_price_html?b.minimum_price_html:0,f.focus().val(c(posted_price)),minimum_price_html&&g.html(minimum_price_html).show(),e.data("min-price",minimum_price).slideDown("200")):(d.html(h),e.slideUp("200"))}).on("click",".reset_variations",function(){d.html(h),e.slideUp("200")})}),a(".variations_form").find(".variations select").trigger("change")}function c(a,b){return"undefined"==typeof b&&(b=""),accounting.formatMoney(a,b,woocommerce_nyp_params.currency_format_num_decimals,woocommerce_nyp_params.currency_format_thousand_sep,woocommerce_nyp_params.currency_format_decimal_sep)}function d(a){return parseFloat(accounting.unformat(a,woocommerce_nyp_params.currency_format_decimal_sep))}a("body").on("quick-view-displayed",function(){b()}),b()});